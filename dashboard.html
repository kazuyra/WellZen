<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard ‚Äî HabitTide</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="dashboard.css" />
  <style>
    /* keep or move to style.css once */
    .guest [data-auth="in"]{display:none!important;}
    .auth  [data-auth="out"]{display:none!important;}
  </style>
</head>
<body class="guest">
  <!-- ================= NAV ================= -->
  <header class="site-header">
    <div class="container nav">
      <a class="logo" href="index.html">HabitTide</a>

      <nav class="nav-links">
        <a href="index.html">Home</a>
        <a href="blog/">Blog</a>
        <a href="resources.html">Resources</a>
        <a href="about.html">About</a>
        <a href="roadmap.html">Roadmap</a>
        <a href="contact.html">Contact</a>
      </nav>

      <div class="nav-cta">
        <!-- Logged OUT -->
        <a class="btn btn-ghost" href="sign-up.html" data-auth="out">Sign up</a>
        <a class="btn" href="blog/" data-auth="out">Learn</a>
        <!-- Logged IN -->
        <a class="btn btn-ghost" href="dashboard.html" data-auth="in">My Dashboard</a>
        <button id="logoutBtn" class="btn" data-auth="in">Log out</button>
      </div>
    </div>
  </header>

  <!-- ================= MAIN ================= -->
  <main class="section">
    <div class="container">
      <!-- Header -->
      <section class="dash-header">
        <div>
          <h1 class="h1">Welcome back, <span id="userName">Friend</span> üëã</h1>
          <p class="lead">Tiny daily wins ‚Üí streaks ‚Üí XP ‚Üí badges. Let‚Äôs build momentum.</p>
        </div>
        <div class="xp-card">
          <div>
            <div class="xp">XP: <span id="xpTotal">0</span></div>
            <div class="streak">üî• Streak: <span id="globalStreak">0</span> days</div>
          </div>
          <div class="level">Lvl <span id="levelNum">1</span></div>
        </div>
      </section>

      <!-- Category Filters -->
      <section class="cat-wrap">
        <div id="catFilters" class="tag-row">
          <button class="tag is-active" data-cat="all">All</button>
          <button class="tag" data-cat="mind">Mind</button>
          <button class="tag" data-cat="body">Body</button>
          <button class="tag" data-cat="soul">Soul</button>
        </div>
        <p class="muted small">Filter everything on this page (habits, focus, mood, sleep) by category.</p>
      </section>

      <!-- Tabs -->
      <div class="tabs">
        <button class="tab is-active" data-tab="todayTab">Today</button>
        <button class="tab" data-tab="habitsTab">Habits</button>
        <button class="tab" data-tab="focusTab">Focus</button>
        <button class="tab" data-tab="moodTab">Mood</button>
        <button class="tab" data-tab="sleepTab">Sleep</button>
        <button class="tab" data-tab="rewardsTab">Badges</button>
      </div>

      <!-- TODAY -->
      <section id="todayTab" class="tab-panel is-active">
        <div class="grid-3">
          <article class="card">
            <h3 class="h3">Today‚Äôs Habits</h3>
            <ul id="todayHabits" class="checklist"></ul>
            <div class="inline">
              <button class="btn" id="quickAddHabit">+ Add habit</button>
              <span class="muted small" id="todayCompleteNote"></span>
            </div>

            <!-- inline quick-add -->
            <form id="quickHabitForm" class="inline-form" hidden>
              <input id="qhTitle" type="text" placeholder="Habit title (e.g., Read 10 mins)" />
              <select id="qhCat">
                <option value="mind">Mind</option>
                <option value="body" selected>Body</option>
                <option value="soul">Soul</option>
              </select>
              <button class="btn" type="submit">Save</button>
              <button class="btn-ghost" type="button" id="qhCancel">Cancel</button>
            </form>
          </article>

          <article class="card">
            <h3 class="h3">Quick Focus</h3>
            <div class="timer">
              <div class="time" id="focusTime">25:00</div>
              <div class="timer-controls">
                <button class="btn" data-action="startFocus">Start</button>
                <button class="btn btn-ghost" data-action="pauseFocus">Pause</button>
                <button class="btn btn-ghost" data-action="resetFocus">Reset</button>
              </div>
              <div class="timer-pills">
                <button class="pill" data-min="15">15m</button>
                <button class="pill is-active" data-min="25">25m</button>
                <button class="pill" data-min="45">45m</button>
              </div>
              <div class="cat-small">
                <label>Category
                  <select id="focusCat">
                    <option value="mind" selected>Mind</option>
                    <option value="body">Body</option>
                    <option value="soul">Soul</option>
                  </select>
                </label>
              </div>
              <p class="muted small">Completing a session gives +10 XP.</p>
            </div>
          </article>

          <article class="card">
            <h3 class="h3">Breathing reset</h3>
            <div class="breath">
              <div class="circle" id="breathCircle"></div>
              <div class="steps" id="breathStep">Inhale</div>
              <div class="breath-controls">
                <button class="btn" id="breathStart">Start</button>
                <button class="btn btn-ghost" id="breathStop">Stop</button>
              </div>
            </div>
            <div class="cat-small">
              <label>Category
                <select id="breathCat">
                  <option value="mind" selected>Mind</option>
                  <option value="body">Body</option>
                  <option value="soul">Soul</option>
                </select>
              </label>
            </div>
            <p class="muted small">4-7-8: Inhale 4 ‚Ä¢ Hold 7 ‚Ä¢ Exhale 8</p>
          </article>
        </div>
      </section>

      <!-- HABITS -->
      <section id="habitsTab" class="tab-panel">
        <article class="card">
          <div class="row-between">
            <h3 class="h3">Your Habits</h3>
            <button class="btn" id="addHabitBtn">+ New habit</button>
          </div>

          <!-- Add Habit Form -->
          <form id="addHabitForm" class="row-wrap" hidden>
            <input id="habitTitle" type="text" placeholder="Habit title" />
            <select id="habitCat">
              <option value="mind">Mind</option>
              <option value="body" selected>Body</option>
              <option value="soul">Soul</option>
            </select>
            <button class="btn" type="submit">Add</button>
            <button class="btn-ghost" type="button" id="addHabitCancel">Cancel</button>
          </form>

          <ul id="habitList" class="habit-list"></ul>
        </article>

        <article class="card">
          <h3 class="h3">Weekly Overview</h3>
          <div id="weekBars" class="week-bars"></div>
          <p class="muted small">Each bar = % habits completed each day</p>
        </article>
      </section>

      <!-- FOCUS -->
      <section id="focusTab" class="tab-panel">
        <article class="card">
          <h3 class="h3">Focus Log</h3>
          <ul id="focusLog" class="list"></ul>
        </article>
      </section>

      <!-- MOOD -->
      <section id="moodTab" class="tab-panel">
        <article class="card">
          <h3 class="h3">How are you feeling?</h3>
          <div class="mood-row">
            <button class="mood" data-mood="üòÑ">üòÑ</button>
            <button class="mood" data-mood="üôÇ">üôÇ</button>
            <button class="mood" data-mood="üòê">üòê</button>
            <button class="mood" data-mood="üòï">üòï</button>
            <button class="mood" data-mood="üò¢">üò¢</button>
          </div>
          <textarea id="moodNote" class="note" rows="3" placeholder="Want to add a note?"></textarea>

          <div class="cat-small">
            <label>Category
              <select id="moodCat">
                <option value="mind" selected>Mind</option>
                <option value="body">Body</option>
                <option value="soul">Soul</option>
              </select>
            </label>
          </div>

          <button class="btn" id="saveMood">Save mood</button>
        </article>

        <article class="card">
          <h3 class="h3">Mood History</h3>
          <ul id="moodLog" class="list"></ul>
        </article>
      </section>

      <!-- SLEEP -->
      <section id="sleepTab" class="tab-panel">
        <article class="card">
          <h3 class="h3">Log last night‚Äôs sleep</h3>
          <div class="sleep-form">
            <label>Hours slept
              <input id="sleepHours" type="number" min="0" max="14" step="0.5" placeholder="7.5" />
            </label>
            <label>Bedtime
              <input id="sleepBed" type="time" />
            </label>
            <label>Wake time
              <input id="sleepWake" type="time" />
            </label>
          </div>

          <div class="cat-small">
            <label>Category
              <select id="sleepCat">
                <option value="body" selected>Body</option>
                <option value="mind">Mind</option>
                <option value="soul">Soul</option>
              </select>
            </label>
          </div>

          <button class="btn" id="saveSleep">Save sleep</button>
        </article>

        <article class="card">
          <h3 class="h3">Sleep History</h3>
          <ul id="sleepLog" class="list"></ul>
        </article>
      </section>

      <!-- BADGES -->
      <section id="rewardsTab" class="tab-panel">
        <article class="card">
          <h3 class="h3">Badges</h3>
          <div id="badgeGrid" class="badge-grid"></div>
        </article>
      </section>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container footer-grid">
      <div class="footer-brand">
        <a class="logo" href="index.html">HabitTide</a>
        <p class="muted small">¬© 2025 Teen Wellness Project</p>
      </div>
    </div>
  </footer>

  <!-- Auth + Dashboard logic -->
  <script type="module" src="auth-ui.js"></script>
  <script type="module" src="dashboard.js"></script>
</body>
</html>
